<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GÃ©nÃ©rateur de Carte de Jeu D&D</title>
</head>
<body>
<header>
<nav>
<a href="index.html">Accueil</a>
<a href="generator-all.html">GÃ©nÃ©rateurs</a>
<a href="contact.html">Contact</a>
</nav>
</header>

<main>
    <section>
        <h1>GÃ©nÃ©rateur de Carte de Jeu D&D</h1>

        <label for="map-size">Taille de la carte (cases) :</label>
        <input type="number" id="map-size" min="5" max="50" value="10">

        <br>

        <label for="cell-size">Taille des cases (en pixels) :</label>
        <input type="number" id="cell-size" min="20" max="100" value="30">

        <br>

        <h3>Terrains Ã  inclure :</h3>
        <label><input type="checkbox" class="terrain-option" value="ğŸŒ²" checked> ForÃªt (ğŸŒ²)</label>
        <label><input type="checkbox" class="terrain-option" value="ğŸ°" checked> ChÃ¢teau (ğŸ°)</label>
        <label><input type="checkbox" class="terrain-option" value="ğŸ’§" checked> Eau (ğŸ’§)</label>
        <label><input type="checkbox" class="terrain-option" value="ğŸªµ" checked> Bois (ğŸªµ)</label>
        <label><input type="checkbox" class="terrain-option" value="ğŸª¨" checked> Roche (ğŸª¨)</label>
        <label><input type="checkbox" class="terrain-option" value="ğŸŒ¿" checked> Herbe (ğŸŒ¿)</label>
        <label><input type="checkbox" class="terrain-option" value="ğŸ”¥" checked> Feu (ğŸ”¥)</label>

        <br>

        <h3>Ã‰lÃ©ments supplÃ©mentaires :</h3>
        <label><input type="checkbox" id="include-enemies" checked> Ennemis (âš”ï¸)</label>
        <label><input type="checkbox" id="include-traps" checked> PiÃ¨ges (ğŸ•³ï¸)</label>
        <label><input type="checkbox" id="include-treasures" checked> TrÃ©sors (ğŸ’)</label>

        <br>

        <button id="generate-map">GÃ©nÃ©rer la Carte</button>
        <button id="download-map">TÃ©lÃ©charger la Carte</button>

        <h3>Carte gÃ©nÃ©rÃ©e :</h3>
        <div id="map-container"></div>
    </section>
</main>

<script>
    function generateMap(size, cellSize, terrains, includeEnemies, includeTraps, includeTreasures) {
        const mapContainer = document.getElementById('map-container');
        mapContainer.innerHTML = ''; // RÃ©initialiser la carte

        for (let row = 0; row < size; row++) {
            const rowDiv = document.createElement('div');
            rowDiv.classList.add('map-row');

            for (let col = 0; col < size; col++) {
                const cell = document.createElement('div');
                cell.classList.add('map-cell');

                // SÃ©lectionner un terrain alÃ©atoire
                const randomTerrain = terrains[Math.floor(Math.random() * terrains.length)];

                // Ajouter des ennemis, piÃ¨ges et trÃ©sors alÃ©atoirement
                let cellContent = randomTerrain;
                if (includeEnemies && Math.random() < 0.05) cellContent = 'âš”ï¸';
                if (includeTraps && Math.random() < 0.05) cellContent = 'ğŸ•³ï¸';
                if (includeTreasures && Math.random() < 0.02) cellContent = 'ğŸ’';

                cell.textContent = cellContent;
                cell.style.width = `${cellSize}px`;
                cell.style.height = `${cellSize}px`;
                rowDiv.appendChild(cell);
            }

            mapContainer.appendChild(rowDiv);
        }
    }

    document.getElementById('generate-map').addEventListener('click', () => {
        const size = document.getElementById('map-size').value;
        const cellSize = document.getElementById('cell-size').value;
        
        const terrainCheckboxes = document.querySelectorAll('.terrain-option:checked');
        const terrains = Array.from(terrainCheckboxes).map(checkbox => checkbox.value);

        const includeEnemies = document.getElementById('include-enemies').checked;
        const includeTraps = document.getElementById('include-traps').checked;
        const includeTreasures = document.getElementById('include-treasures').checked;

        generateMap(size, cellSize, terrains, includeEnemies, includeTraps, includeTreasures);
    });

    document.getElementById('download-map').addEventListener('click', () => {
        const mapContainer = document.getElementById('map-container');
        html2canvas(mapContainer).then(canvas => {
            const link = document.createElement('a');
            link.download = 'carte-dnd.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    });
</script>

<style>
    #map-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-top: 20px;
    }

    .map-row {
        display: flex;
    }

    .map-cell {
        display: flex;
        justify-content: center;
        align-items: center;
        border: 1px solid #333;
        font-size: 24px;
    }

    label {
        display: inline-block;
        margin-right: 10px;
    }

    button {
        margin-top: 10px;
        margin-right: 10px;
    }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>
